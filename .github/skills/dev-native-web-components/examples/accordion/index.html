<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Animated Accordion Example</title>
    <meta
      name="description"
      content="Native details/summary accordion with CSS animations."
    />

    <style>
      :root {
        color-scheme: light dark;
        --bg: light-dark(#f5f5f5, #0a0a0a);
        --fg: light-dark(#1a1a1a, #f0f0f0);
        --surface: light-dark(#ffffff, #141414);
        --border: light-dark(#e5e5e5, #2a2a2a);
        --accent: light-dark(#0066cc, #5599ff);
        --muted: light-dark(#666666, #999999);
        --radius: 0.75rem;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        background: var(--bg);
        color: var(--fg);
        padding: clamp(1rem, 4vw, 3rem);
        line-height: 1.6;
      }

      h1 {
        margin: 0 0 0.5rem;
        font-size: clamp(1.5rem, 4vw, 2.5rem);
      }

      .intro {
        color: var(--muted);
        margin-bottom: 2rem;
        max-width: 60ch;
      }

      /* ===== Accordion Container ===== */
      .accordion {
        max-width: 40rem;
        border: 1px solid var(--border);
        border-radius: var(--radius);
        overflow: hidden;
        background: var(--surface);
      }

      /* ===== Details Element ===== */
      .accordion details {
        border-bottom: 1px solid var(--border);

        &:last-child {
          border-bottom: none;
        }
      }

      /* ===== Summary (Header) ===== */
      .accordion summary {
        padding: 1rem 1.25rem;
        font-weight: 500;
        cursor: pointer;
        list-style: none;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        transition: background 0.2s;

        &:hover {
          background: var(--border);
        }

        &:focus-visible {
          outline: 2px solid var(--accent);
          outline-offset: -2px;
        }

        /* Remove default marker */
        &::marker,
        &::-webkit-details-marker {
          display: none;
        }

        /* Custom chevron icon */
        &::after {
          content: "";
          width: 1.25rem;
          height: 1.25rem;
          background: currentColor;
          -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3E%3Cpath d='M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z'/%3E%3C/svg%3E")
            center/contain no-repeat;
          mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3E%3Cpath d='M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z'/%3E%3C/svg%3E")
            center/contain no-repeat;
          flex-shrink: 0;
          transition: rotate 0.3s ease;
        }
      }

      .accordion details[open] > summary::after {
        rotate: 180deg;
      }

      /* ===== Content Animation ===== */
      .accordion details::details-content {
        block-size: 0;
        overflow-y: clip;
        transition:
          block-size 0.3s ease,
          content-visibility 0.3s ease allow-discrete;
      }

      .accordion details[open]::details-content {
        block-size: auto;
      }

      .accordion .content {
        padding: 0 1.25rem 1.25rem;
        color: var(--muted);
      }

      .accordion .content p {
        margin: 0;
      }

      .accordion .content p + p {
        margin-top: 1rem;
      }

      /* ===== Exclusive Accordion (name attribute) ===== */
      .exclusive-note {
        margin-top: 2rem;
        padding: 1rem;
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        font-size: 0.875rem;
      }

      .exclusive-note code {
        background: var(--border);
        padding: 0.125rem 0.375rem;
        border-radius: 0.25rem;
      }

      /* ===== Second Accordion (Non-exclusive) ===== */
      h2 {
        margin: 3rem 0 1rem;
        font-size: 1.25rem;
      }

      .accordion-multi details {
        /* Allow multiple open at once (no name attribute) */
      }

      /* ===== Icon Accordion ===== */
      .icon-accordion {
        margin-top: 2rem;
      }

      .icon-accordion summary {
        gap: 0.75rem;
      }

      .icon-accordion .icon {
        width: 2rem;
        height: 2rem;
        border-radius: 0.5rem;
        background: var(--accent);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .icon-accordion .title {
        flex: 1;
      }

      .icon-accordion .subtitle {
        font-size: 0.875rem;
        font-weight: 400;
        color: var(--muted);
      }
    </style>
  </head>

  <body>
    <h1>Animated Accordion</h1>
    <p class="intro">
      Native <code>&lt;details&gt;</code> and
      <code>&lt;summary&gt;</code> elements with smooth CSS animations using
      <code>::details-content</code>.
    </p>

    <!-- Exclusive Accordion (only one open at a time) -->
    <div class="accordion">
      <details name="faq" open>
        <summary>What is Declarative Shadow DOM?</summary>
        <div class="content">
          <p>
            Declarative Shadow DOM (DSD) allows you to create Shadow DOM
            directly in HTML using a
            <code>&lt;template shadowrootmode="open"&gt;</code> element.
          </p>
          <p>
            This enables server-side rendering of web components without
            JavaScript, improving initial load performance and SEO.
          </p>
        </div>
      </details>

      <details name="faq">
        <summary>Why use container queries instead of media queries?</summary>
        <div class="content">
          <p>
            Container queries respond to the size of a component's container
            rather than the viewport. This makes components truly modular and
            reusable.
          </p>
          <p>
            A card component using container queries will adapt whether it's in
            a sidebar, main content, or full-width section, without knowing
            about page layout.
          </p>
        </div>
      </details>

      <details name="faq">
        <summary>What are the benefits of native Popover API?</summary>
        <div class="content">
          <p>
            The Popover API provides built-in behaviors like top-layer
            rendering, light dismiss (close on outside click), and proper
            stacking without z-index wars.
          </p>
          <p>
            It integrates with accessibility features automatically and requires
            minimal JavaScript compared to custom modal implementations.
          </p>
        </div>
      </details>

      <details name="faq">
        <summary>How does the ::details-content pseudo-element work?</summary>
        <div class="content">
          <p>
            The <code>::details-content</code> pseudo-element targets the
            content area of a <code>&lt;details&gt;</code> element (everything
            except the summary).
          </p>
          <p>
            It allows animating the expand/collapse by transitioning
            <code>block-size</code> from <code>0</code> to <code>auto</code> â€“
            something previously impossible.
          </p>
        </div>
      </details>
    </div>

    <div class="exclusive-note">
      ðŸ’¡ <strong>Exclusive accordion:</strong> Using <code>name="faq"</code> on
      each <code>&lt;details&gt;</code> makes them mutually exclusive â€“ only one
      can be open at a time.
    </div>

    <h2>Multi-Open Accordion</h2>
    <p class="intro" style="margin-bottom: 1rem">
      Without the <code>name</code> attribute, multiple sections can be open
      simultaneously.
    </p>

    <div class="accordion accordion-multi icon-accordion">
      <details>
        <summary>
          <span class="icon">ðŸš€</span>
          <span class="title">
            Performance
            <div class="subtitle">Core Web Vitals and optimization</div>
          </span>
        </summary>
        <div class="content">
          <p>
            Native features like DSD and popover are optimized by browser
            engines, providing better performance than JavaScript-based
            alternatives.
          </p>
        </div>
      </details>

      <details>
        <summary>
          <span class="icon">â™¿</span>
          <span class="title">
            Accessibility
            <div class="subtitle">WCAG 2.2 AA compliance</div>
          </span>
        </summary>
        <div class="content">
          <p>
            Native elements like <code>&lt;details&gt;</code>,
            <code>&lt;dialog&gt;</code>, and <code>popover</code> have built-in
            accessibility support including keyboard navigation and screen
            reader announcements.
          </p>
        </div>
      </details>

      <details>
        <summary>
          <span class="icon">ðŸ“±</span>
          <span class="title">
            Responsive Design
            <div class="subtitle">Container queries and fluid units</div>
          </span>
        </summary>
        <div class="content">
          <p>
            Use container queries for component-level responsiveness and dynamic
            viewport units (<code>dvh</code>, <code>svh</code>) for
            mobile-friendly layouts.
          </p>
        </div>
      </details>
    </div>

    <script>
      // No JavaScript needed for accordion functionality!
      // This script is only for demonstration purposes.

      document.querySelectorAll(".accordion details").forEach((details) => {
        details.addEventListener("toggle", (e) => {
          console.log(
            `${e.target.querySelector("summary").textContent.trim()}: ${e.target.open ? "opened" : "closed"}`,
          );
        });
      });
    </script>
  </body>
</html>
