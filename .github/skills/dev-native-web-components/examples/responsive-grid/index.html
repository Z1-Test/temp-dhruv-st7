<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Responsive Grid Example</title>
    <meta
      name="description"
      content="Container query grid layout with fluid columns."
    />

    <style>
      :root {
        color-scheme: light dark;
        --bg: light-dark(#f5f5f5, #0a0a0a);
        --fg: light-dark(#1a1a1a, #f0f0f0);
        --surface: light-dark(#ffffff, #141414);
        --border: light-dark(#e5e5e5, #2a2a2a);
        --accent: light-dark(#0066cc, #5599ff);
        --muted: light-dark(#666666, #999999);
        --radius: 0.75rem;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        background: var(--bg);
        color: var(--fg);
        padding: clamp(1rem, 4vw, 3rem);
        line-height: 1.5;
      }

      h1 {
        margin: 0 0 0.5rem;
        font-size: clamp(1.5rem, 4cqi, 2.5rem);
      }

      .intro {
        color: var(--muted);
        margin-bottom: 2rem;
        max-width: 60ch;
      }

      /* ===== Grid Container ===== */
      .grid-container {
        container-type: inline-size;
        container-name: grid;
      }

      .grid {
        display: grid;
        gap: clamp(1rem, 2cqi, 1.5rem);
        /* Fluid columns - minimum 15rem, fill available space */
        grid-template-columns: repeat(auto-fill, minmax(min(100%, 15rem), 1fr));
      }

      /* Container query adjustments */
      @container grid (width < 30rem) {
        .grid {
          grid-template-columns: 1fr;
        }
      }

      @container grid (width >=60rem) {
        .grid {
          grid-template-columns: repeat(4, 1fr);
        }
      }

      /* ===== Grid Item Card ===== */
      .card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        overflow: hidden;
        container-type: inline-size;
        container-name: card;
        display: grid;
        grid-template-rows: subgrid;
        grid-row: span 3;
        /* image, content, footer */
      }

      .card-image {
        aspect-ratio: 16/9;
        background: var(--border);
        overflow: hidden;
      }

      .card-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .card-content {
        padding: clamp(0.75rem, 2cqi, 1.25rem);
      }

      .card-title {
        margin: 0 0 0.5rem;
        font-size: clamp(1rem, 3cqi, 1.25rem);
        font-weight: 600;
        line-height: 1.2;
      }

      .card-description {
        margin: 0;
        font-size: clamp(0.875rem, 2cqi, 1rem);
        color: var(--muted);
      }

      .card-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: clamp(0.75rem, 2cqi, 1.25rem);
        border-top: 1px solid var(--border);
      }

      .card-meta {
        font-size: 0.875rem;
        color: var(--muted);
      }

      .card-action {
        padding: 0.5rem 1rem;
        background: var(--accent);
        color: white;
        border: none;
        border-radius: 0.375rem;
        font: inherit;
        font-size: 0.875rem;
        cursor: pointer;
        transition: opacity 0.2s;
      }

      .card-action:hover {
        opacity: 0.9;
      }

      /* Card container query for horizontal layout */
      @container card (width >=20rem) {
        .card {
          grid-template-rows: 1fr;
          grid-template-columns: 8rem 1fr;
          grid-row: span 1;
        }

        .card-image {
          aspect-ratio: 1;
        }

        .card-content {
          display: flex;
          flex-direction: column;
          justify-content: center;
        }

        .card-footer {
          display: none;
        }
      }

      /* ===== Featured Card ===== */
      .card--featured {
        grid-column: 1 / -1;
        grid-row: span 1;
      }

      @container grid (width >=45rem) {
        .card--featured {
          grid-template-columns: 1fr 1fr;
          grid-template-rows: 1fr;
        }

        .card--featured .card-image {
          aspect-ratio: 4/3;
        }

        .card--featured .card-content {
          display: flex;
          flex-direction: column;
          justify-content: center;
          padding: clamp(1.5rem, 3cqi, 2.5rem);
        }

        .card--featured .card-title {
          font-size: clamp(1.5rem, 4cqi, 2rem);
        }

        .card--featured .card-footer {
          display: flex;
          border: none;
          padding-top: 1rem;
        }
      }

      /* ===== Size indicator ===== */
      .size-indicator {
        position: fixed;
        bottom: 1rem;
        right: 1rem;
        padding: 0.5rem 1rem;
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-family: monospace;
      }
    </style>
  </head>

  <body>
    <h1>Responsive Grid Layout</h1>
    <p class="intro">
      This grid uses container queries to adapt its layout based on available
      space. Resize the browser window to see the grid respond.
    </p>

    <div class="grid-container">
      <div class="grid">
        <!-- Featured Card -->
        <article class="card card--featured">
          <div class="card-image">
            <img
              src="https://picsum.photos/seed/featured/800/600"
              alt="Featured"
              loading="eager"
            />
          </div>
          <div class="card-content">
            <h2 class="card-title">Featured Article: Container Queries</h2>
            <p class="card-description">
              Container queries allow you to style elements based on their
              container's size, not the viewport. This enables truly modular,
              reusable components.
            </p>
            <div class="card-footer">
              <span class="card-meta">Dec 25, 2024</span>
              <button class="card-action">Read More</button>
            </div>
          </div>
        </article>

        <!-- Regular Cards -->
        <article class="card">
          <div class="card-image">
            <img
              src="https://picsum.photos/seed/1/400/300"
              alt=""
              loading="lazy"
            />
          </div>
          <div class="card-content">
            <h2 class="card-title">Subgrid Layouts</h2>
            <p class="card-description">
              Align nested grid items with parent grid tracks.
            </p>
          </div>
          <div class="card-footer">
            <span class="card-meta">5 min read</span>
            <button class="card-action">Read</button>
          </div>
        </article>

        <article class="card">
          <div class="card-image">
            <img
              src="https://picsum.photos/seed/2/400/300"
              alt=""
              loading="lazy"
            />
          </div>
          <div class="card-content">
            <h2 class="card-title">CSS Nesting</h2>
            <p class="card-description">
              Native CSS nesting without preprocessors.
            </p>
          </div>
          <div class="card-footer">
            <span class="card-meta">3 min read</span>
            <button class="card-action">Read</button>
          </div>
        </article>

        <article class="card">
          <div class="card-image">
            <img
              src="https://picsum.photos/seed/3/400/300"
              alt=""
              loading="lazy"
            />
          </div>
          <div class="card-content">
            <h2 class="card-title">View Transitions</h2>
            <p class="card-description">Smooth page transitions with CSS.</p>
          </div>
          <div class="card-footer">
            <span class="card-meta">4 min read</span>
            <button class="card-action">Read</button>
          </div>
        </article>

        <article class="card">
          <div class="card-image">
            <img
              src="https://picsum.photos/seed/4/400/300"
              alt=""
              loading="lazy"
            />
          </div>
          <div class="card-content">
            <h2 class="card-title">Anchor Positioning</h2>
            <p class="card-description">
              Position elements relative to anchors.
            </p>
          </div>
          <div class="card-footer">
            <span class="card-meta">6 min read</span>
            <button class="card-action">Read</button>
          </div>
        </article>

        <article class="card">
          <div class="card-image">
            <img
              src="https://picsum.photos/seed/5/400/300"
              alt=""
              loading="lazy"
            />
          </div>
          <div class="card-content">
            <h2 class="card-title">@scope Rule</h2>
            <p class="card-description">Scope styles without Shadow DOM.</p>
          </div>
          <div class="card-footer">
            <span class="card-meta">4 min read</span>
            <button class="card-action">Read</button>
          </div>
        </article>
      </div>
    </div>

    <div class="size-indicator" id="size"></div>

    <script>
      // Show container size for debugging
      const container = document.querySelector(".grid-container");
      const indicator = document.getElementById("size");

      const updateSize = () => {
        indicator.textContent = `Container: ${container.offsetWidth}px`;
      };

      updateSize();
      new ResizeObserver(updateSize).observe(container);
    </script>
  </body>
</html>
